import CenterLabelExtension from'./center-label-extension';import{componentFactory}from'../../_internal/lib/lib';import{priorityList}from'../../_internal/schedular';let UNDEF,isDoughnut2D=a=>'Doughnut2D'===a.getName(),isMultiLevelPie=a=>'MultilevelPie'===a.getName(),isChartAPI=a=>'chartAPI'===a.getType(),isDataset=a=>'dataset'===a.getType(),count=0;function centerLabel(a,b){var c=this.apiInstance,d=c.getChildren('dataset')[0],e=d.getChildren(),f=e.centerLabel&&e.centerLabel[0],g=c.config,h=function(){var d,e,g=c.getDatasets()[0],h=g.config,i=h.piePlotOptions,j=i.innerSize;if(d=f.config,'object'!=typeof b)b=d;else{for(e in d)b[e]===UNDEF&&(b[e]=d[e]);d=Object.assign(d,b)}b.label=a,d.label=a,g.centerLabelConfig=d,j&&f&&f.draw(a||'')};f===UNDEF&&(componentFactory(d,CenterLabelExtension,'centerLabel',1,[g]),f=e.centerLabel&&e.centerLabel[0]),c.addJob(`eiMethods-center-lebel${count++}`,h,priorityList.postRender)}export default{extension:function(a){var b;a.addEventListener('instantiated',function(a){let c=a.sender;b||(b=isChartAPI(c)&&(isDoughnut2D(c)||isMultiLevelPie(c))),b&&isDataset(c)&&c.registerFactory('centerLabel',function(){let a=c.getFromEnv('chartConfig'),d=c.getFromEnv('chartInstance'),e=!!(a.centerlabel||a.defaultcenterlabel);d.centerLabel=centerLabel,componentFactory(c,CenterLabelExtension,'centerLabel',e?1:0,[a]),b=UNDEF})})},name:'CenterLabelExtension',type:'extension',requiresFusionCharts:!0};