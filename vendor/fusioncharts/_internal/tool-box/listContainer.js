import{ToolBarFactoryHelper}from'./toolBarFactoryHelper';import{getEventHandlersFor,isDIV}from'./helper';import{POSITION_BOTTOM,POSITION_TOP}from'./default-attrs';import ComponentInterface from'../../core/component-interface';let UNDEF,PXSTR='px',DEFAULT_TIMEOUT=300;class ListContainer extends ComponentInterface{configure(a,b,c){var d,e,f,g,h,i=b&&b.top||0,j=b&&b.left,k=b&&b.right,l=ToolBarFactoryHelper.getOptions(c).chart;for(e in f=this,g=this.config,g.container=a,g.position=ListContainer.POSITION_BOTTOM,g.atomicLists=[],g.refContainers=[],g.parentListCon=UNDEF,g.hideFnIds=[],g.target=UNDEF,g.chartId=c,j&&k||(g.positionCalculation=!0),g.hoverOverStyle={background:'#333333',color:'#FFFFFF',cursor:'pointer'},g.hoverOutStyle={background:'#FFFFFF',color:'#000000'},g._defaultStyle={position:'absolute',"z-index":50,top:i===UNDEF?'auto':i+PXSTR,right:k===UNDEF?'auto':k+PXSTR,left:j===UNDEF?'auto':j+PXSTR,overflow:'hidden',background:'#ffffff',border:'1px solid #646464',"box-shadow":'#999999 2px 2px 5px',padding:'5px 3px',display:'none'},d=g.container.style,g._defaultStyle)d[e]=g._defaultStyle[e];l.getFromEnv('chart-container').appendChild(g.container),h=getEventHandlersFor('hover',g.container),h(function(){f.show(this)},function(){f.hide(DEFAULT_TIMEOUT,this)})}addAtomicListItem(a){var b=this.config;a.isAtomicList&&a.isAtomicList()&&(b.atomicLists.push(a),a.stickIntoContainer(b.container,this))}show(a){var b,c,d,e,f,g=this.config,h=g.hideFnIds,i=ToolBarFactoryHelper.getOptions(g.chartId).chart,j=i.config.width,k=g.positionCalculation,l=0;for(g.target=g.target||a,b=h.length;l<b;l++)clearTimeout(h[l]);h.length=0,c=g.parentListCon,c?(c.show(g.target),g.container.style.left=c.container.offsetLeft+c.container.offsetWidth+PXSTR,g.container.style.top=c.container.offsetTop+g.target.offsetTop+PXSTR):!isDIV(a)&&(f=a.getBBox(),k&&(g.container.style.display='block',d=g.container.offsetWidth,d+f.x>j?(g.container.style.left='auto',g.container.style.right=j-f.x-f.width+PXSTR):(g.container.style.left=f.x+PXSTR,g.container.style.right='auto'),g.container.style.display='none'),g.position===POSITION_BOTTOM?(e=f.isArtificial?.5:1.5,g.container.style.top=f.y+f.height*e+PXSTR,g.container.style.bottom='auto'):(g.container.style.bottom=i.config.height-f.y+PXSTR,g.container.style.top='auto')),g.container.style.display='block'}hide(a){var b,c=this.config,d=c.container;b=c.parentListCon,b&&b.hide(DEFAULT_TIMEOUT),c.hideFnIds.push(setTimeout(function(){d.style.display='none'},a))}dispose(){var a,b,c=this.config,d=c.atomicLists,e=c.refContainers;for(c.hideFnIds.length=0,a=0,b=d.length;a<b;a++)d[a].dispose();for(d.length=0,a=0,b=e.length;a<b;a++)e[a].dispose();e.length=0}isListContainer(){return!0}}ListContainer.POSITION_TOP=POSITION_TOP,ListContainer.POSITION_BOTTOM=POSITION_BOTTOM;export default ListContainer;