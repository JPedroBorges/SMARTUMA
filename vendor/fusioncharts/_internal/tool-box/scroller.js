import{stubFN,pluckNumber}from'../lib/lib';import SymbolClass from'./symbolclass';import{scrollerSpecAttr}from'./default-attrs';import{ToolBarFactoryHelper}from'./toolBarFactoryHelper';import{mergeConf}from'./helper';let UNDEF;class Scroller extends SymbolClass{configure(a,b,c,d){let e=this.config;e._id='TB_SCROLLER'+(b||0),e.pId=c,e.conf={},e.userConf=scrollerSpecAttr,e.chartId=d,this.setConfiguaration(a),e.evt={tooltext:UNDEF,click:stubFN,hover:[stubFN,stubFN]}}getName(){return'scroller'}getType(){return'scroller'}setConfiguaration(a){var b=this.config,c=ToolBarFactoryHelper.getOptions(b.chartId).chart,d=c.getFromEnv('color-manager');scrollerSpecAttr.color||(scrollerSpecAttr.color='#'+d.getColor('altHGridColor')),mergeConf(scrollerSpecAttr,b.conf),mergeConf(a,b.conf)}getLogicalSpace(){var a=this.config,b=a.conf,c={};return mergeConf(scrollerSpecAttr,c),mergeConf(c,b),SymbolClass.prototype.getLogicalSpace.call(this)}getDefaultLayer(){var a,b,c=this.config,d=ToolBarFactoryHelper.getComponentPool(c.chartId),e=d.getKeys();return a=d.getComponent(c._id,c.pId,e.KEY_GROUP),b=a('scroll'),b}draw(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w=this.config,z=w.conf,A=ToolBarFactoryHelper.getComponentPool(w.chartId),B=A.getKeys(),C={},D={};return 1===arguments.length?(p=arguments[0],a=p.x,b=p.y,g=p.parentLayer,o=!!p.sepLayer):(a=arguments[0],b=arguments[1],e=arguments[2],z&&e?mergeConf(e,z):e={},g=e.parentLayer,o=!!e.sepLayer,p=z),mergeConf(scrollerSpecAttr,D),p.isHorizontal?delete D.width:delete D.height,mergeConf(D,p,!0),b+=p.padding,c=p.height,d=p.width,f=p.isHorizontal,s='scroll-repaint',r=p.startPercent,h=Math.max(p.scrollRatio,.01),i=p.showButtons,j=p.displayFlat,k=p.fullCanvasWidth,l=p.windowedCanvasWidth,m=p.color,n=p.roundEdges,v=pluckNumber(p.scrollPosition,r,0),C[s]=[a,b,d,c],g=g||this.getDefaultLayer(),t=A.getComponent(w._id,w.pId,B.KEY_RECT),q=o?t('scroll-child'):g,t=A.getComponent(w._id,w.pId,B.KEY_SCROLLER),w.node=t(a,b,d,c,f,{scrollPosition:v,displayStyleFlat:j,showButtons:i},q),w.node.data('fullCanvasWidth',k).data('windowedCanvasWidth',l).attr({"scroll-ratio":h,fill:m,"stroke-width":1,"scroll-position":v,r:n&&2||0}).scroll(w.evt),u=A.getCreationStatus(),u||(w.node.undrag(),w.node.attr(C),w.node.attr({"scroll-display-style":j?'flat':'3d'}).scroll(w.evt)),w.node}attachEventHandlers(a){var b=this,c=this.config,d=c.evt;return a&&(a.scroll&&'function'==typeof a.scroll&&(d.scroll=a.scroll),a.scrollStart&&'function'==typeof a.scrollStart&&(d.scrollStart=a.scrollStart),a.scrollEnd&&'function'==typeof a.scrollEnd&&(d.scrollEnd=a.scrollEnd)),super.attachEventHandlers(arguments),b}}Scroller.registerSymbol=UNDEF,Scroller._setConfiguaration=stubFN;export default Scroller;