import{extend2}from'../lib/lib';import{btnSpecAttr}from'./default-attrs';import{ToolBarFactoryHelper,defaultGroupConf}from'./toolBarFactoryHelper';import{mergeConf}from'./helper';import ComponentInterface from'../../core/component-interface';let UNDEF;class ComponentGroup extends ComponentInterface{configure(a,b,c){let d=this.config;d.preId=a||0,d.id=UNDEF,d.symbolList=[],d.groupRect=UNDEF,d.pId=b,d.chartId=c,extend2(d.btnConfig={},btnSpecAttr),extend2(d.groupConfig={},defaultGroupConf)}addSymbol(a,b){var c=this.config,d=c.symbolList;b?d.unshift(a):d.push(a)}setConfiguaration(a){var b=this.config,c=a.buttons,d=a.group;c&&mergeConf(c,b.btnConfig),d&&mergeConf(d,b.groupConfig)}draw(a,b,c,d){var e,f,g,h,i,j,k,l,m,n,o=this.config,p=o.preId,q=o.symbolList,r=o.groupConfig,s=o.btnConfig,t=b.x,u=b.y,v=0,w=0,x=Number.NEGATIVE_INFINITY,y=ToolBarFactoryHelper.getComponentPool(o.chartId),z=y.getKeys();for(n=o.id=p.toString()+c,m=y.getComponent(o.id,o.pId,z.KEY_GROUP),e=m('toolbar-group'+n,a),m=y.getComponent(o.id,o.pId,z.KEY_RECT),i=o.groupRect=m(e).attr({height:0,width:0,x:t,y:u}),t+=r.hPadding,u+=r.vPadding,w+=r.hPadding,v+=r.vPadding,(f=0,g=q.length);f<g;f++)h=q[f],d||h._setConfiguaration(s),l=h.draw(t,u,{parentLayer:e,isResize:d}),j=l.getBBox(),x<j.height&&(x=j.height),t+=j.width+(k=s.spacing);return w+=t+r.hPadding-b.x-k-r.offsetAdjustment,v+=x+r.vPadding+r.offsetAdjustment,isFinite(v)||(v=0),isFinite(w)||(w=0),i.attr({height:v,width:w}).attr({fill:r.fill,r:r.radius,stroke:r.borderColor,"stroke-width":r.borderThickness}),j=i.getBBox(),{height:j.height,width:j.width}}getLogicalSpace(){var a,b,c,d,e=Number.NEGATIVE_INFINITY,f=this.config,g=f.symbolList,h=0,i=0,j=e,k=0;for(b=0,c=g.length;b<c;b++)a=g[b],a._setConfiguaration(f.btnConfig),d=a.getLogicalSpace(),i+=d.width+f.btnConfig.spacing,k+=d.width,j=j<d.height?d.height:j;return k?(j!==e&&i&&(i-=f.btnConfig.spacing-2*f.groupConfig.hPadding-f.groupConfig.offsetAdjustment,h=j+2*f.groupConfig.vPadding+f.groupConfig.offsetAdjustment),{width:i,height:h}):{width:0,height:0}}dispose(){for(var a=this.config,b=a.symbolList,c=0,d=b.length;c<d;c++)b[c].dispose();b.length=0,a.groupRect&&a.groupRect.remove()}}export default ComponentGroup;