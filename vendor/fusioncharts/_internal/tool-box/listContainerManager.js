import{ToolBarFactoryHelper}from'./toolBarFactoryHelper';import ListContainer from'./listContainer';import AtomicList from'./atomicList';import{stubFN}from'../lib/lib';import ComponentInterface from'../../core/component-interface';let UNDEF,DIV='div',doc=window.document;class ListContainerManager extends ComponentInterface{configure(a,b){var c=this.config;c.chartId=b,c.container=UNDEF,c.listContainer=UNDEF,c.measurement=a}init(a){var b,c,d=this.config,e=ToolBarFactoryHelper.getComponentPool(d.chartId),f=e.getKeys();return d.container||(b=e.getComponent('div0',a,f.KEY_DIV),c=b(),c&&(c.innerHTML=''),d.container=new ListContainer,d.container.configure(c,d.measurement,d.chartId)),this}getFirstContainer(){return this.config.container}appendAsList(a,b){var c,d,e=this,f=e.config.container.config.hoverOverStyle,g=e.config.container.config.hoverOutStyle;return function a(b,h,i){var j,k,l,m,n,o,p,q,r,s=0;for(q=h||e.config.container,j=b instanceof Array?b:[b],k=j.length;s<k;s++){for(n in l=j[s],m=new AtomicList,m.configure({hoverOverStyle:f,hoverOutStyle:g},i),l)m.config.name=n,o=l[n],m.config.action=o.action,m.setStyle(o.style),-1!==n.search(/^<[^<]+>$/)&&(m.config.hoverOverStyle={},m.config.hoverOutStyle={},o.handler=stubFN),p=o.handler,'function'==typeof p?m.config.handler=o.handler:(d=new ListContainer,d.configure(doc.createElement(DIV),void 0,i),r=a(p,d));q.addAtomicListItem(m),r&&(r.parentListCon=q,q.refContainers.push(r),m.assignSubContainer(r)),r=UNDEF}return c=q}(a,b,e.config.chartId),c}dispose(){var a=this.config;a.container.dispose(),a.container=UNDEF}}export default ListContainerManager;